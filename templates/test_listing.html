<div class="container mt-4">
  <h2>My Tests</h2>
  <a href="{{ url_for('create_test') }}" class="btn btn-primary mb-3">Create New Test</a>

  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Test Name</th>
        <th>Test Key</th>
        <th>Status</th>
        <th>Created On</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for test in tests %}
      <tr>
        <td>{{ test.name }}</td>
        <td>{{ test.test_key }}</td>
        <td>
          {% if test.status == 1 %}
            <span class="badge bg-success">Active</span>
          {% else %}
            <span class="badge bg-secondary">Inactive</span>
          {% endif %}
        </td>
        <td>{{ test.creation_date.strftime('%Y-%m-%d') }}</td>
        <td>
          <a href="{{ url_for('add_questions', test_id=test.test_id) }}" class="btn btn-sm btn-info">Questions</a>
          <a href="{{ url_for('edit_test', test_id=test.test_id) }}" class="btn btn-sm btn-warning">Edit</a>
          <form method="POST" action="{{ url_for('delete_test', test_id=test.test_id) }}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this test?');">
            <button type="submit" class="btn btn-sm btn-danger">Delete</button>
          </form>
          <form action="/update_status/{{ test.test_id }}" method="post">
            <input type="hidden" name="new_status" value="published">
            <button type="submit">Publish</button>
          </form>
          <form action="/update_status/{{ test.test_id }}" method="post">
            <input type="hidden" name="new_status" value="closed">
            <button type="submit">Close</button>
          </form>

        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="5" class="text-center">No tests found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
